<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestionnaire de mots de passe</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Gestionnaire de mots de passe</h1>

  <section>
    <h2>1. Générer un mot de passe</h2>
    <label>Nom: <input type="text" id="nom"></label>
    <label>Identifiant: <input type="text" id="identifiant"></label>
    <label>Taille: <input type="number" id="taille" min="1"></label>
    <label>Type de caractères:
      <select id="type">
        <option value="1">Lettres uniquement</option>
        <option value="2">Chiffres uniquement</option>
        <option value="3">Lettres et chiffres</option>
        <option value="4">Lettres et caractères spéciaux</option>
        <option value="5">Chiffres et caractères spéciaux</option>
        <option value="6">Lettres, chiffres et caractères spéciaux</option>
      </select>
    </label>
    <button onclick="genererMotDePasse()">Générer et enregistrer</button>
  </section>

  <section>
    <h2>2. Ajouter un mot de passe existant</h2>
    <label>Nom: <input type="text" id="nomAjout"></label>
    <label>Identifiant: <input type="text" id="idAjout"></label>
    <label>Mot de passe: <input type="text" id="mdpAjout"></label>
    <button onclick="ajouterMdpExistant()">Ajouter</button>
  </section>

  <section>
    <h2>3. Supprimer un mot de passe</h2>
    <label>Nom à supprimer: <input type="text" id="nomSuppr"></label>
    <button onclick="supprimerMotDePasse()">Supprimer</button>
  </section>

  <section>
    <h2>4. Mots de passe enregistrés</h2>
    <button onclick="afficherMotsDePasse()">Afficher</button>
    <pre id="affichage"></pre>
  </section>

  <script>
    const lettres = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    const chiffres = "0123456789";
    const speciaux = "!@#$%^&*()_+-=[]{}|;:',.<>/?";

    function getCaracteres(type) {
      switch (type) {
        case "1": return lettres;
        case "2": return chiffres;
        case "3": return lettres + chiffres;
        case "4": return lettres + speciaux;
        case "5": return chiffres + speciaux;
        case "6": return lettres + chiffres + speciaux;
        default: return lettres + chiffres;
      }
    }

    function genererMotDePasse() {
      const nom = document.getElementById("nom").value;
      const identifiant = document.getElementById("identifiant").value;
      const taille = parseInt(document.getElementById("taille").value);
      const type = document.getElementById("type").value;
      const caracteres = getCaracteres(type);

      let motDePasse = "";
      for (let i = 0; i < taille; i++) {
        motDePasse += caracteres.charAt(Math.floor(Math.random() * caracteres.length));
      }

      enregistrer(nom, identifiant, motDePasse);
      alert("Mot de passe généré et enregistré !");
    }

    function ajouterMdpExistant() {
      const nom = document.getElementById("nomAjout").value;
      const identifiant = document.getElementById("idAjout").value;
      const motDePasse = document.getElementById("mdpAjout").value;
      enregistrer(nom, identifiant, motDePasse);
      alert("Mot de passe ajouté !");
    }

    function enregistrer(nom, identifiant, motDePasse) {
      const mdps = JSON.parse(localStorage.getItem("motsDePasse") || "[]");
      mdps.push({ nom, identifiant, motDePasse });
      localStorage.setItem("motsDePasse", JSON.stringify(mdps));
    }

    function afficherMotsDePasse() {
      const mdps = JSON.parse(localStorage.getItem("motsDePasse") || "[]");
      const affichage = document.getElementById("affichage");
      affichage.textContent = mdps.map(e => `${e.nom} : ${e.identifiant} : ${e.motDePasse}`).join("\n") || "Aucun mot de passe enregistré.";
    }

    function supprimerMotDePasse() {
      const nom = document.getElementById("nomSuppr").value;
      let mdps = JSON.parse(localStorage.getItem("motsDePasse") || "[]");
      const initialLength = mdps.length;
      mdps = mdps.filter(e => e.nom !== nom);

      if (mdps.length < initialLength) {
        localStorage.setItem("motsDePasse", JSON.stringify(mdps));
        alert("Mot de passe supprimé !");
      } else {
        alert("Aucun mot de passe trouvé avec ce nom.");
      }
    }
  </script>
</body>
</html>
